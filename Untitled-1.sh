cat > ~/deploy.sh << 'EOF' #!/bin/bash # MarHire Deployment Script echo "=========================================" echo "Starting MarHire Deployment..." echo "=========================================" # Navigate to project directory cd ~/marhire # Pull latest changes echo "ğŸ“¥ Pulling latest changes from Git..." git pull origin main # Install/Update composer dependencies echo "ğŸ“¦ Installing Composer dependencies..." composer install --no-dev --optimize-autoloader # Run migrations echo "ğŸ—„ï¸ Running database migrations..." php artisan migrate --force # Copy public files to public_html echo "ğŸ“‚ Copying public files to public_html..." cp -r ~/marhire/public/* ~/public_html/ # Create the correct index.php file echo "ğŸ“ Creating index.php for Laravel..." echo '<?php use Illuminate\Contracts\Http\Kernel; use Illuminate\Http\Request; define("LARAVEL_START", microtime(true)); if (file_exists($maintenance = __DIR__."/../marhire/storage/framework/maintenance.php")) { require $maintenance; } require __DIR__."/../marhire/vendor/autoload.php"; $app = require_once __DIR__."/../marhire/bootstrap/app.php"; $kernel = $app->make(Kernel::class); $response = $kernel->handle( $request = Request::capture() )->send(); $kernel->terminate($request, $response);' > ~/public_html/index.php # Clear all Laravel caches echo "ğŸ§¹ Clearing Laravel caches..." php artisan config:clear php artisan cache:clear php artisan view:clear php artisan route:clear php artisan optimize:clear # Clear compiled views echo "ğŸ—‘ï¸ Clearing compiled views..." rm -rf ~/marhire/storage/framework/views/* # Set proper permissions echo "ğŸ”’ Setting correct permissions..." chmod -R 775 ~/marhire/storage chmod -R 775 ~/marhire/bootstrap/cache find ~/public_html -type d -exec chmod 755 {} \; find ~/public_html -type f -exec chmod 644 {} \; echo "=========================================" echo "âœ… Deployment Complete!" echo "=========================================" echo "" echo "Your site should now be updated at http://marhire.com/" echo "" 'EOF'